
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Aniversariantes ICM Campinas</title>
  <link rel="manifest" href="manifest.json" />
  <style>
    body { font-family: Arial, sans-serif; padding: 1rem; }
    .form-container { margin-bottom: 1rem; }
    input, select, button { margin: 0.25rem 0; display: block; width: 100%; }
    .lista { margin-top: 1rem; }
    .aniversariante { border-bottom: 1px solid #ccc; padding: 0.5rem 0; }
    .whatsapp { background: green; color: white; padding: 0.25rem 0.5rem; border: none; margin-top: 0.5rem; }
  </style>
</head>
<body>
  <h1>Aniversariantes ICM Campinas</h1>
  <div class="form-container">
    <input id="nome" placeholder="Nome" />
    <input id="telefone" placeholder="Telefone (com DDD)" />
    <input id="nascimento" type="date" />
    <select id="categoria">
      <option value="">Categoria</option>
      <option value="bebÃª">BebÃª</option>
      <option value="pequeno">Pequeno</option>
      <option value="intermediÃ¡rio">IntermediÃ¡rio</option>
      <option value="adolescente">Adolescente</option>
      <option value="jovem">Jovem</option>
      <option value="diÃ¡cono">DiÃ¡cono</option>
      <option value="ungido">Ungido</option>
      <option value="pastor">Pastor</option>
    </select>
    <button onclick="adicionar()">Adicionar</button>
  </div>

  <div>
    <label>Filtrar por categoria:</label>
    <select id="filtroCategoria" onchange="filtrarCategoria()">
      <option value="">Todas</option>
      <option value="bebÃª">BebÃª</option>
      <option value="pequeno">Pequeno</option>
      <option value="intermediÃ¡rio">IntermediÃ¡rio</option>
      <option value="adolescente">Adolescente</option>
      <option value="jovem">Jovem</option>
      <option value="diÃ¡cono">DiÃ¡cono</option>
      <option value="ungido">Ungido</option>
      <option value="pastor">Pastor</option>
    </select>
  </div>

  <div class="lista" id="lista"></div>

  <script>
    const lista = JSON.parse(localStorage.getItem("aniversariantes") || "[]");

    function salvar() {
      localStorage.setItem("aniversariantes", JSON.stringify(lista));
      render();
    }

    function adicionar() {
      const nome = document.getElementById("nome").value.trim();
      const telefone = document.getElementById("telefone").value.trim();
      const nascimento = document.getElementById("nascimento").value;
      const categoria = document.getElementById("categoria").value;

      if (!nome || !telefone || !nascimento || !categoria) return;

      lista.push({ nome, telefone, nascimento, categoria });
      salvar();
    }

    function filtrarCategoria() {
      render();
    }

    function render() {
      const container = document.getElementById("lista");
      const filtro = document.getElementById("filtroCategoria").value;
      container.innerHTML = "";

      const hoje = new Date().toISOString().slice(5, 10);

      lista
        .filter(p => !filtro || p.categoria === filtro)
        .sort((a, b) => a.nascimento.slice(5).localeCompare(b.nascimento.slice(5)))
        .forEach(p => {
          const isHoje = p.nascimento.slice(5, 10) === hoje;
          const div = document.createElement("div");
          div.className = "aniversariante";
          div.innerHTML = `
            <strong>${p.nome}</strong><br/>
            ${p.nascimento} â€” ${p.categoria}<br/>
            <a href="https://wa.me/55${p.telefone}?text=ParabÃ©ns%20${encodeURIComponent(p.nome)}!%20Deus%20abenÃ§oe!" target="_blank">
              <button class="whatsapp">${isHoje ? "ðŸŽ‰ " : ""}Parabenizar no WhatsApp</button>
            </a>
          `;
          container.appendChild(div);
        });
    }

    render();
  </script>
</body>
</html>
